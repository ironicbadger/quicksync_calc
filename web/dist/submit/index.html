<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Intel Quick Sync Video benchmark results - Compare hardware encoding performance across CPU generations"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&display=swap" rel="stylesheet"><title>Submit Results - QuickSync Benchmarks</title><style>:root{--color-bg: #0f172a;--color-bg-secondary: #1e293b;--color-text: #f1f5f9;--color-text-muted: #94a3b8;--color-accent: #3b82f6;--color-accent-hover: #60a5fa;--color-border: #334155;--font-mono: "Fira Code", ui-monospace, "Cascadia Code", "Source Code Pro", Menlo, Monaco, "Courier New", monospace}*{box-sizing:border-box;margin:0;padding:0}html{font-family:var(--font-mono);background-color:var(--color-bg);color:var(--color-text);line-height:1.6}body{min-height:100vh}a{color:var(--color-accent);text-decoration:none}a:hover{color:var(--color-accent-hover);text-decoration:underline}code{font-family:var(--font-mono);font-size:.875em;background-color:var(--color-bg-secondary);padding:.125rem .375rem;border-radius:.25rem}.container{max-width:1400px;margin:0 auto;padding:0 1rem}.card{background-color:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:.5rem;padding:1.5rem}button{cursor:pointer;font-family:inherit}select,input{font-family:inherit;font-size:1rem}
</style>
<link rel="stylesheet" href="/_astro/submit.DgcSLLUe.css"></head> <body> <header style="border-bottom: 1px solid var(--color-border); padding: 1rem 0;"> <div class="container" style="display: flex; justify-content: space-between; align-items: center;"> <a href="/" style="font-size: 1.25rem; font-weight: 600; color: var(--color-text);">
QuickSync Benchmarks
</a> <nav style="display: flex; gap: 1.5rem;"> <a href="/">Dashboard</a> <a href="/leaderboard">Leaderboard</a> <a href="/about">About</a> <a href="https://github.com/ironicbadger/quicksync_calc" target="_blank" rel="noopener">GitHub</a> </nav> </div> </header> <main style="padding: 2rem 0;">  <div class="container submit-page" data-astro-cid-cfftgubm> <!-- Loading State --> <div id="loading-state" class="state-container" data-astro-cid-cfftgubm> <div class="loading-spinner" data-astro-cid-cfftgubm></div> <p data-astro-cid-cfftgubm>Loading your benchmark results...</p> </div> <!-- Error State --> <div id="error-state" class="state-container" style="display: none;" data-astro-cid-cfftgubm> <div class="error-icon" data-astro-cid-cfftgubm>!</div> <h2 id="error-title" data-astro-cid-cfftgubm>Submission Not Found</h2> <p id="error-message" data-astro-cid-cfftgubm>This submission link has expired or is invalid.</p> <a href="/" class="btn btn-primary" data-astro-cid-cfftgubm>View All Results</a> </div> <!-- Success State --> <div id="success-state" class="state-container" style="display: none;" data-astro-cid-cfftgubm> <div class="success-icon" data-astro-cid-cfftgubm>&#10003;</div> <h2 data-astro-cid-cfftgubm>Results Submitted!</h2> <p id="success-message" data-astro-cid-cfftgubm>Your benchmark results have been added to the database.</p> <a href="/" class="btn btn-primary" data-astro-cid-cfftgubm>View All Results</a> </div> <!-- Preview State --> <div id="preview-state" style="display: none;" data-astro-cid-cfftgubm> <div class="page-header" data-astro-cid-cfftgubm> <h1 data-astro-cid-cfftgubm>Submit Your Benchmark Results</h1> <p class="subtitle" data-astro-cid-cfftgubm>Review your results and complete verification to add them to the database.</p> </div> <!-- Results Preview --> <div class="card results-preview" data-astro-cid-cfftgubm> <div class="card-header" data-astro-cid-cfftgubm> <h2 data-astro-cid-cfftgubm>Your Benchmark Results</h2> <span id="results-meta" class="results-meta" data-astro-cid-cfftgubm></span> </div> <div class="table-wrapper" data-astro-cid-cfftgubm> <table class="results-table" data-astro-cid-cfftgubm> <thead data-astro-cid-cfftgubm> <tr data-astro-cid-cfftgubm> <th data-astro-cid-cfftgubm>Test</th> <th data-astro-cid-cfftgubm>Bitrate</th> <th data-astro-cid-cfftgubm>Time</th> <th data-astro-cid-cfftgubm>FPS</th> <th data-astro-cid-cfftgubm>Speed</th> <th data-astro-cid-cfftgubm>Watts</th> <th data-astro-cid-cfftgubm>Efficiency</th> </tr> </thead> <tbody id="results-tbody" data-astro-cid-cfftgubm> <!-- Populated by JS --> </tbody> </table> </div> </div> <!-- Submitter ID --> <div class="card submitter-section" data-astro-cid-cfftgubm> <h2 data-astro-cid-cfftgubm>Submitter ID <span class="optional-label" data-astro-cid-cfftgubm>(optional)</span></h2> <p class="field-description" data-astro-cid-cfftgubm>
Add an identifier to track your submissions. This helps you find your results later.
</p> <input type="text" id="submitter-id" placeholder="e.g., alexs_homelab, my_server" class="text-input" maxlength="50" data-astro-cid-cfftgubm> </div> <!-- Turnstile CAPTCHA --> <div class="card captcha-section" data-astro-cid-cfftgubm> <h2 data-astro-cid-cfftgubm>Verification</h2> <p class="field-description" data-astro-cid-cfftgubm>Complete the verification below to submit your results.</p> <div id="turnstile-container" class="turnstile-widget" data-astro-cid-cfftgubm></div> <p id="captcha-error" class="captcha-error" style="display: none;" data-astro-cid-cfftgubm>
Verification failed. Please try again.
</p> </div> <!-- Submit Button --> <div class="submit-section" data-astro-cid-cfftgubm> <button id="submit-btn" class="btn btn-primary btn-large" disabled data-astro-cid-cfftgubm> <span id="submit-text" data-astro-cid-cfftgubm>Complete Verification Above</span> <span id="submit-spinner" class="btn-spinner" style="display: none;" data-astro-cid-cfftgubm></span> </button> </div> </div> </div>  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script> <script>(function(){const API_URL = "https://quicksync-api.ktz.me";
const TURNSTILE_SITE_KEY = "0x4AAAAAACE2xYy4W4qewY3u";

    const state = {
      token: null,
      results: null,
      turnstileToken: null,
      isSubmitting: false,
    };

    // DOM elements
    const loadingState = document.getElementById('loading-state');
    const errorState = document.getElementById('error-state');
    const successState = document.getElementById('success-state');
    const previewState = document.getElementById('preview-state');
    const errorTitle = document.getElementById('error-title');
    const errorMessage = document.getElementById('error-message');
    const successMessage = document.getElementById('success-message');
    const resultsMeta = document.getElementById('results-meta');
    const resultsTbody = document.getElementById('results-tbody');
    const submitterInput = document.getElementById('submitter-id');
    const submitBtn = document.getElementById('submit-btn');
    const submitText = document.getElementById('submit-text');
    const submitSpinner = document.getElementById('submit-spinner');
    const captchaError = document.getElementById('captcha-error');

    // Initialize
    async function init() {
      // Get token from URL
      const params = new URLSearchParams(window.location.search);
      state.token = params.get('token');

      if (!state.token) {
        showError('No Token Provided', 'Please use the link provided by the benchmark script.');
        return;
      }

      try {
        // Fetch pending submission
        const response = await fetch(`${API_URL}/api/submit/pending/${state.token}`);
        const data = await response.json();

        if (!response.ok || !data.success) {
          if (data.expired) {
            showError('Submission Expired', 'This link has expired. Please run the benchmark again to get a new submission link.');
          } else {
            showError('Submission Not Found', data.error || 'Unable to load your submission.');
          }
          return;
        }

        state.results = data.results;
        renderResults(data);
        initTurnstile();
        showState('preview');

      } catch (err) {
        console.error('Failed to fetch submission:', err);
        showError('Connection Error', 'Unable to connect to the server. Please try again.');
      }
    }

    function showState(stateName) {
      loadingState.style.display = 'none';
      errorState.style.display = 'none';
      successState.style.display = 'none';
      previewState.style.display = 'none';

      switch (stateName) {
        case 'loading':
          loadingState.style.display = 'flex';
          break;
        case 'error':
          errorState.style.display = 'flex';
          break;
        case 'success':
          successState.style.display = 'flex';
          break;
        case 'preview':
          previewState.style.display = 'block';
          break;
      }
    }

    function showError(title, message) {
      errorTitle.textContent = title;
      errorMessage.textContent = message;
      showState('error');
    }

    function showSuccess(message) {
      successMessage.textContent = message;
      showState('success');
    }

    function renderResults(data) {
      const results = data.results;
      if (!results || results.length === 0) return;

      // Set metadata
      const cpu = results[0].cpu_raw.replace(/\(R\)|\(TM\)/g, '').replace(/CPU.*/, '').trim();
      const arch = results[0].architecture || 'Unknown';
      resultsMeta.innerHTML = `<strong>${cpu}</strong> &bull; ${arch} &bull; ${results.length} test${results.length !== 1 ? 's' : ''}`;

      // Render table rows
      resultsTbody.innerHTML = results.map(r => {
        const testDisplay = formatTestName(r.test_name);
        const speedDisplay = r.avg_speed ? `${r.avg_speed.toFixed(2)}x` : 'N/A';
        const wattsDisplay = r.avg_watts ? `${r.avg_watts.toFixed(1)}W` : 'N/A';
        const effDisplay = r.fps_per_watt ? r.fps_per_watt.toFixed(2) : 'N/A';

        return `
          <tr>
            <td><span class="test-badge test-${getTestType(r.test_name)}">${testDisplay}</span></td>
            <td>${r.bitrate_kbps} kb/s</td>
            <td>${r.time_seconds.toFixed(1)}s</td>
            <td class="metric-cell">${r.avg_fps.toFixed(1)}</td>
            <td class="metric-cell">${speedDisplay}</td>
            <td class="metric-cell">${wattsDisplay}</td>
            <td class="metric-cell">${effDisplay}</td>
          </tr>
        `;
      }).join('');
    }

    function formatTestName(name) {
      return name
        .replace(/_/g, ' ')
        .replace(/h264/i, 'H.264')
        .replace(/hevc/i, 'HEVC')
        .replace(/8bit/i, '8-bit')
        .replace(/10bit/i, '10-bit')
        .replace(/1080p/i, '1080p')
        .replace(/4k/i, '4K');
    }

    function getTestType(name) {
      if (name.includes('h264')) return 'h264';
      if (name.includes('hevc')) return 'hevc';
      return 'other';
    }

    function initTurnstile() {
      if (typeof turnstile !== 'undefined') {
        turnstile.render('#turnstile-container', {
          sitekey: TURNSTILE_SITE_KEY,
          theme: 'dark',
          callback: function(token) {
            state.turnstileToken = token;
            captchaError.style.display = 'none';
            updateSubmitButton();
          },
          'expired-callback': function() {
            state.turnstileToken = null;
            updateSubmitButton();
          },
          'error-callback': function() {
            state.turnstileToken = null;
            captchaError.style.display = 'block';
            updateSubmitButton();
          },
        });
      } else {
        // Wait for Turnstile script to load
        setTimeout(initTurnstile, 100);
      }
    }

    function updateSubmitButton() {
      if (state.turnstileToken && !state.isSubmitting) {
        submitBtn.disabled = false;
        submitText.textContent = 'Submit Results';
      } else if (state.isSubmitting) {
        submitBtn.disabled = true;
        submitText.textContent = 'Submitting...';
      } else {
        submitBtn.disabled = true;
        submitText.textContent = 'Complete Verification Above';
      }
    }

    async function handleSubmit() {
      if (!state.turnstileToken || state.isSubmitting) return;

      state.isSubmitting = true;
      updateSubmitButton();
      submitSpinner.style.display = 'inline-block';

      try {
        const response = await fetch(`${API_URL}/api/submit/pending/confirm`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            token: state.token,
            turnstile_token: state.turnstileToken,
            submitter_id: submitterInput.value.trim() || null,
          }),
        });

        const data = await response.json();

        if (!response.ok || !data.success) {
          if (data.expired) {
            showError('Submission Expired', 'This link has expired. Please run the benchmark again.');
          } else if (data.turnstile_errors) {
            captchaError.style.display = 'block';
            state.turnstileToken = null;
            if (typeof turnstile !== 'undefined') {
              turnstile.reset();
            }
          } else {
            showError('Submission Failed', data.error || 'An error occurred while submitting.');
          }
          return;
        }

        showSuccess(data.message || `Successfully submitted ${data.inserted} result${data.inserted !== 1 ? 's' : ''}!`);

      } catch (err) {
        console.error('Submit error:', err);
        showError('Connection Error', 'Unable to submit results. Please try again.');
      } finally {
        state.isSubmitting = false;
        submitSpinner.style.display = 'none';
        updateSubmitButton();
      }
    }

    // Event listeners
    submitBtn.addEventListener('click', handleSubmit);

    // Start
    init();
  })();</script>   </main> <footer style="border-top: 1px solid var(--color-border); padding: 2rem 0; margin-top: 4rem;"> <div class="container" style="text-align: center; color: var(--color-text-muted);"> <p>Intel Quick Sync Video Benchmark Database</p> <p style="margin-top: 0.5rem; font-size: 0.875rem;">
Data sourced from community submissions &bull;
<a href="https://github.com/ironicbadger/quicksync_calc">Contribute on GitHub</a> </p> </div> </footer> </body></html>