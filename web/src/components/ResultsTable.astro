---
// Results table with sorting
---

<div class="results-table-wrapper card">
  <div class="table-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
    <h3 style="font-size: 1rem; color: var(--color-text-muted);">
      Results <span id="results-count">(loading...)</span>
    </h3>
    <div style="display: flex; gap: 0.5rem; align-items: center;">
      <label for="results-limit" style="font-size: 0.875rem; color: var(--color-text-muted);">Show:</label>
      <select id="results-limit">
        <option value="25">25</option>
        <option value="50">50</option>
        <option value="100" selected>100</option>
        <option value="250">250</option>
      </select>
    </div>
  </div>

  <div class="table-scroll">
    <table id="results-table">
      <thead>
        <tr>
          <th data-sort="cpu_raw">CPU</th>
          <th data-sort="architecture">Architecture</th>
          <th data-sort="test_name">Test</th>
          <th>Quality</th>
          <th data-sort="avg_fps" class="numeric">FPS</th>
          <th data-sort="avg_watts" class="numeric">Watts</th>
          <th data-sort="fps_per_watt" class="numeric">FPS/Watt</th>
          <th data-sort="avg_speed" class="numeric">Speed</th>
          <th data-sort="score" class="numeric">Score</th>
          <th data-sort="submitted_at">Submitted</th>
        </tr>
      </thead>
      <tbody id="results-body">
        <tr>
          <td colspan="10" style="text-align: center; padding: 2rem;">Loading...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="pagination" style="margin-top: 1rem; display: flex; justify-content: center; gap: 0.5rem;">
    <button id="prev-page" class="btn-secondary" disabled>&larr; Previous</button>
    <span id="page-info" style="padding: 0.5rem 1rem; color: var(--color-text-muted);">Page 1</span>
    <button id="next-page" class="btn-secondary">Next &rarr;</button>
  </div>
</div>

<style is:global>
  .results-table-wrapper {
    overflow: hidden;
  }

  .table-scroll {
    overflow-x: auto;
  }

  #results-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;
  }

  #results-table th {
    text-align: left;
    padding: 0.75rem 1rem;
    border-bottom: 2px solid var(--color-border);
    color: var(--color-text-muted);
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
  }

  #results-table th:hover {
    color: var(--color-text);
  }

  #results-table th.numeric {
    text-align: right;
  }

  #results-table th.sorted-asc::after {
    content: ' ↑';
  }

  #results-table th.sorted-desc::after {
    content: ' ↓';
  }

  #results-table td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--color-border);
    vertical-align: middle;
  }

  #results-table td.numeric {
    text-align: right;
  }

  #results-table tbody tr:hover {
    background-color: rgba(59, 130, 246, 0.1);
  }

  .cpu-cell {
    max-width: 300px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .test-badge {
    display: inline-block;
    padding: 0.125rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
    background-color: var(--color-bg);
  }

  .test-badge.h264 { color: #22c55e; }
  .test-badge.hevc { color: #3b82f6; }
  .test-badge.cpu { color: #f59e0b; }

  .score-badge {
    display: inline-block;
    padding: 0.125rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 600;
    min-width: 2rem;
    text-align: center;
  }

  .score-badge.score-high {
    background-color: rgba(34, 197, 94, 0.2);
    color: #22c55e;
  }

  .score-badge.score-mid {
    background-color: rgba(234, 179, 8, 0.2);
    color: #eab308;
  }

  .score-badge.score-low {
    background-color: rgba(239, 68, 68, 0.2);
    color: #ef4444;
  }

  /* Quality badge styles */
  .quality-badge {
    display: inline-block;
    padding: 0.125rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.7rem;
    font-weight: 600;
    cursor: help;
  }

  .quality-badge.quality-excellent {
    background-color: rgba(34, 197, 94, 0.2);
    color: #22c55e;
  }

  .quality-badge.quality-good {
    background-color: rgba(234, 179, 8, 0.2);
    color: #eab308;
  }

  .quality-badge.quality-fair {
    background-color: rgba(239, 68, 68, 0.2);
    color: #ef4444;
  }

  #results-limit {
    padding: 0.25rem 0.5rem;
    background-color: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 0.25rem;
    color: var(--color-text);
  }

  .btn-secondary {
    padding: 0.5rem 1rem;
    background-color: transparent;
    color: var(--color-text-muted);
    border: 1px solid var(--color-border);
    border-radius: 0.375rem;
  }

  .btn-secondary:hover:not(:disabled) {
    background-color: var(--color-bg);
    color: var(--color-text);
  }

  .btn-secondary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
</style>
